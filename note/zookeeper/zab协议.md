### ZAB协议概述
- zookeeper使用一个单一的主进程来接收并处理客户端的所有的事物请求,并采用ZAB的原子广播协议,将服务器数据的状态变更以事务Proposal的形式广播到所有的副本进程上去
- ZAB协议保证如果一个状态变更已经被处理了,则其依赖的其他状态变更都已经被提前处理掉了

### ZAB协议两种基本的模式
崩溃恢复：leader服务器出现问题或者leader与一半follwer失去联系
- 能够确保提交已经被leader提交的事务
- 丢弃已经被跳过的事务

消息广播
- leader为每一个事务请求生成对应的Proposal来进行广播,为这个事务生成全局唯一递增的id
- 为每一个follwer各自分配一个单独的队列,然后将Proposal依次放入这些队列中,并且根据FIFO策略进行消息发送
- follwer以事务日志形式写入磁盘,并给与leader响应
- 若leader收到半数以上的follwer的ack消息,则发送commit消息
